<mat-card>
  <mat-card-title>Attendance Records</mat-card-title>
  <mat-card-content>
    <table mat-table [dataSource]="records()" class="mat-elevation-z1 full-width">
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let row">{{ row.date }}</td>
      </ng-container>
      <ng-container matColumnDef="checkIn">
        <th mat-header-cell *matHeaderCellDef>Check In</th>
        <td mat-cell *matCellDef="let row">{{ row.checkIn | date:'short' }}</td>
      </ng-container>
      <ng-container matColumnDef="checkOut">
        <th mat-header-cell *matHeaderCellDef>Check Out</th>
        <td mat-cell *matCellDef="let row">{{ row.checkOut ? (row.checkOut | date:'short') : '-' }}</td>
      </ng-container>
      <ng-container matColumnDef="total">
        <th mat-header-cell *matHeaderCellDef>Total</th>
        <td mat-cell *matCellDef="let row">{{ format(row.totalMs) }}</td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button color="primary" (click)="edit(row)" title="Edit">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['date','checkIn','checkOut','total','actions']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['date','checkIn','checkOut','total','actions']"></tr>
    </table>
    <div *ngIf="records().length === 0" class="empty">No records yet.</div>
  </mat-card-content>
</mat-card>

<mat-card>
  <mat-card-title>This Month (Date-wise)</mat-card-title>
  <mat-card-content>
    <table mat-table [dataSource]="monthRows()" class="mat-elevation-z1 full-width">
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let row">
          <span class="weekend-dot" *ngIf="row.weekend" title="Weekend"></span>
          {{ row.dateKey }}
        </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let row">{{ row.present ? 'Present' : 'Absent' }}</td>
      </ng-container>
      <ng-container matColumnDef="total">
        <th mat-header-cell *matHeaderCellDef>Total</th>
        <td mat-cell *matCellDef="let row">{{ format(row.totalMs) }}</td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let row">
          <button mat-icon-button color="primary" (click)="edit({date: row.dateKey, totalMs: row.totalMs})" title="Edit times">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['date','status','total','actions']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['date','status','total','actions']"></tr>
    </table>
  </mat-card-content>
</mat-card>


