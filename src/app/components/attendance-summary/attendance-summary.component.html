<!-- Yearly Absents Card - Prominent Display -->
<mat-card class="yearly-absent-card">
  <mat-card-header>
    <mat-card-title>
      <span class="title-with-icon">
        <mat-icon>event_busy</mat-icon>
        <span>Total Absents This Year</span>
      </span>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="yearly-absent-display">
      <div class="yearly-value">{{ summary().totalAbsentDaysYear }}</div>
      <div class="yearly-label">Absent Days in {{ getCurrentYear() }}</div>
      <div class="yearly-subtext">Across all working days this year</div>
    </div>
  </mat-card-content>
</mat-card>

<mat-card class="summary-card">
  <mat-card-header>
    <mat-card-title>
      <span class="title-with-icon">
        <mat-icon>assessment</mat-icon>
        <span>Monthly Summary</span>
      </span>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="grid">
      <div class="item item-present">
        <div class="item-icon">üìÖ</div>
        <div class="label">Total Present Days</div>
        <div class="value">{{ summary().totalPresentDays }}</div>
        <div class="subtext">days this month</div>
      </div>
      <div class="item item-absent">
        <div class="item-icon">‚è∏Ô∏è</div>
        <div class="label">Total Absent Days</div>
        <div class="value">{{ summary().totalAbsentDaysMonth }}</div>
        <div class="subtext">days this month</div>
      </div>
      <div class="item item-average">
        <div class="item-icon">‚è±Ô∏è</div>
        <div class="label">Average Daily</div>
        <div class="value">{{ (summary().averageDailyHours | number:'1.0-2') }} <span class="unit">h</span></div>
        <div class="subtext">per day</div>
      </div>
    </div>

    <div class="subgrid">
      <div class="block">
        <div class="block-header">
          <mat-icon>calendar_today</mat-icon>
          <div class="block-title">This Month</div>
        </div>
        <div class="block-content">
          <div class="stat-row">
            <span class="stat-label">Worked:</span>
            <span class="stat-value worked">{{ format(summary().month.totalMs) }}</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Target:</span>
            <span class="stat-value target">{{ format(summary().month.targetMs) }}</span>
          </div>
          <div class="stat-row highlight" [class.good]="summary().month.aheadBehindMs >= 0" [class.bad]="summary().month.aheadBehindMs < 0">
            <span class="stat-label">{{ sign(summary().month.aheadBehindMs) }}:</span>
            <span class="stat-value">{{ format(abs(summary().month.aheadBehindMs)) }}</span>
          </div>
        </div>
      </div>
      <div class="block">
        <div class="block-header">
          <mat-icon>calendar_month</mat-icon>
          <div class="block-title">This Year</div>
        </div>
        <div class="block-content">
          <div class="stat-row">
            <span class="stat-label">Total Absent Days:</span>
            <span class="stat-value absent-value">{{ summary().totalAbsentDaysYear }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="monthly-absents-section">
      <div class="section-header">
        <mat-icon>view_list</mat-icon>
        <div class="section-title">Monthly Absents Breakdown - {{ getCurrentYear() }}</div>
        <div class="section-subtitle">Detailed view of absents for each month</div>
      </div>
      <div class="monthly-list">
        <div *ngFor="let month of summary().monthlyAbsents" class="month-item" [class.current-month]="month.month === getCurrentMonth()" [class.past-month]="month.month < getCurrentMonth()" [class.future-month]="month.month > getCurrentMonth()">
          <div class="month-header">
            <div class="month-name">{{ month.monthName }}</div>
            <span *ngIf="month.month === getCurrentMonth()" class="current-badge">Current</span>
            <span *ngIf="month.month < getCurrentMonth()" class="past-badge">Past</span>
            <span *ngIf="month.month > getCurrentMonth()" class="future-badge">Upcoming</span>
          </div>
          <div class="month-details">
            <div class="detail-row">
              <div class="detail-label">
                <mat-icon>event_busy</mat-icon>
                <span>Absent Days</span>
              </div>
              <div class="detail-value absent-value">{{ month.absentDays }}</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">
                <mat-icon>work</mat-icon>
                <span>Working Days</span>
              </div>
              <div class="detail-value">{{ month.workingDays }}</div>
            </div>
            <div class="detail-row">
              <div class="detail-label">
                <mat-icon>check_circle</mat-icon>
                <span>Present Days</span>
              </div>
              <div class="detail-value present-value">{{ month.workingDays - month.absentDays }}</div>
            </div>
            <div class="detail-row highlight-row" *ngIf="month.absentDays > 0 && month.workingDays > 0">
              <div class="detail-label">
                <mat-icon>percent</mat-icon>
                <span>Absence Rate</span>
              </div>
              <div class="detail-value rate-value">{{ (month.absentDays / month.workingDays * 100) | number:'1.1-1' }}%</div>
            </div>
            <div class="detail-row highlight-row" *ngIf="month.workingDays === 0">
              <div class="detail-label">
                <mat-icon>info</mat-icon>
                <span>Status</span>
              </div>
              <div class="detail-value">No data yet</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>


